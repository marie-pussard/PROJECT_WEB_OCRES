{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\marie\\\\Desktop\\\\PROJECT_WEB_OCRES\\\\frontend\\\\src\\\\components\\\\recette.js\";\nimport React from 'react';\nimport Carousel from 'react-bootstrap/Carousel';\nimport axios from \"axios\";\nimport CanvasJSReact from '../canvasjs.react'; //var CanvasJSReact = require('./canvasjs.react');\n// var CanvasJS = CanvasJSReact.CanvasJS;\n\nvar CanvasJSChart = CanvasJSReact.CanvasJSChart;\nconst API_URL = \"https://foodish-api.herokuapp.com/api/\";\nexport class Recipe extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeRecipe: 0,\n      recipes: [{\n        image: '',\n        calories: 800,\n        protein: 60,\n        fat: 300,\n        sugar: 80\n      }, {\n        image: '',\n        calories: 700,\n        protein: 80,\n        fat: 360,\n        sugar: 180\n      }, {\n        image: '',\n        calories: 700,\n        protein: 80,\n        fat: 360,\n        sugar: 180\n      }]\n    };\n    this.fetchRecipe = this.fetchRecipe.bind(this);\n    this.handleSelect = this.handleSelect.bind(this);\n  }\n\n  writeRecipesToState(result) {\n    const newRecipe = {\n      title: result.title,\n      image: result.image,\n      calories: result.nutrition.nutrients[0].amount,\n      protein: result.nutrition.nutrients[1].amount,\n      fat: result.nutrition.nutrients[2].amount,\n      sugar: result.nutrition.nutrients[3].amount\n    };\n    this.setState({\n      recipes: [...this.state.recipes, newRecipe]\n    });\n  }\n\n  componentDidMount() {\n    this.fetchRecipe().then(response => {\n      // Récupère la donnée d'une API\n      const data = response.data;\n      console.log(data);\n\n      for (const result in data.results) {\n        this.writeRecipesToState(result);\n      }\n\n      console.log(this.state);\n    }).catch(console.error);\n  }\n\n  fetchRecipe() {\n    return axios //assemble API with Key and set nutrition parameters\n    // .get(`${API_URL}?apiKey=${API_KEY}&includeNutrition=true`, {\n    .get(\"\".concat(API_URL, \"?apiKey=\").concat(API_KEY, \"&maxFat=25&maxSugar=30&minProtein=25&maxCalories=600&number=3\"), {\n      crossdomain: true\n    });\n  }\n\n  getHTMLElementFromImage(image) {//return `<img src=${API_IMAGE_URL}${recipeID}-312x231@2x.jpg class=\"weather-icon\"/>`\n  }\n\n  handleSelect(activeRecipe, e) {\n    this.setState({\n      activeRecipe\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(Carousel, {\n      activeIndex: this.state.activeRecipe,\n      onSelect: this.handleSelect,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, this.state.recipes.map((recipe, index) => {\n      const options = {\n        // title: {\n        //   text: \"Basic Column Chart in React\"\n        // },\n        data: [{\n          type: \"pie\",\n          startAngle: 240,\n          yValueFormatString: \"##0.0\\\"g\\\"\",\n          indexLabel: \"{label} {y}\",\n          dataPoints: [{\n            y: recipe.protein,\n            label: \"Protéines\"\n          }, {\n            y: recipe.fat,\n            label: \"Gras\"\n          }, {\n            y: recipe.sugar,\n            label: \"Sucre\"\n          }]\n        }]\n      };\n      return React.createElement(Carousel.Item, {\n        key: recipe.title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"d-flex flex-row container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"recipe-img\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: recipe.image,\n        alt: recipe.title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"recipe-chart\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(CanvasJSChart, {\n        options: options,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }))), React.createElement(Carousel.Caption, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, recipe.title)));\n    })));\n  }\n\n}\nexport default Recipe;","map":{"version":3,"sources":["C:/Users/marie/Desktop/PROJECT_WEB_OCRES/frontend/src/components/recette.js"],"names":["React","Carousel","axios","CanvasJSReact","CanvasJSChart","API_URL","Recipe","Component","constructor","props","state","activeRecipe","recipes","image","calories","protein","fat","sugar","fetchRecipe","bind","handleSelect","writeRecipesToState","result","newRecipe","title","nutrition","nutrients","amount","setState","componentDidMount","then","response","data","console","log","results","catch","error","get","API_KEY","crossdomain","getHTMLElementFromImage","e","render","map","recipe","index","options","type","startAngle","yValueFormatString","indexLabel","dataPoints","y","label"],"mappings":"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","sourcesContent":["\r\nimport React from 'react';\r\nimport Carousel from 'react-bootstrap/Carousel';\r\nimport axios from \"axios\";\r\nimport CanvasJSReact from '../canvasjs.react';\r\n//var CanvasJSReact = require('./canvasjs.react');\r\n// var CanvasJS = CanvasJSReact.CanvasJS;\r\nvar CanvasJSChart = CanvasJSReact.CanvasJSChart;\r\n\r\n\r\nconst API_URL = \"https://foodish-api.herokuapp.com/api/\";\r\n\r\nexport class Recipe extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      activeRecipe: 0,\r\n      recipes: [\r\n        {\r\n        image: '',\r\n        calories: 800,\r\n        protein: 60,\r\n        fat: 300,\r\n        sugar: 80,\r\n        },\r\n        {\r\n        image: '',\r\n        calories: 700,\r\n        protein: 80,\r\n        fat: 360,\r\n        sugar: 180,\r\n        },\r\n        {\r\n        image: '',\r\n        calories: 700,\r\n        protein: 80,\r\n        fat: 360,\r\n        sugar: 180,\r\n        },\r\n\r\n    ]\r\n     }\r\n    this.fetchRecipe = this.fetchRecipe.bind(this);\r\n    this.handleSelect = this.handleSelect.bind(this);\r\n  }\r\n\r\n  writeRecipesToState(result){\r\n    const newRecipe = {\r\n      title: result.title,\r\n      image: result.image,\r\n      calories: result.nutrition.nutrients[0].amount,\r\n      protein: result.nutrition.nutrients[1].amount,\r\n      fat: result.nutrition.nutrients[2].amount,\r\n      sugar: result.nutrition.nutrients[3].amount,\r\n    }\r\n    this.setState({\r\n      recipes: [\r\n        ...this.state.recipes,\r\n        newRecipe\r\n      ]\r\n    })\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.fetchRecipe()\r\n    .then((response) => {\r\n      // Récupère la donnée d'une API\r\n      const data = response.data;\r\n      console.log(data);\r\n\r\n      for(const result in data.results) {\r\n        this.writeRecipesToState(result);\r\n      }\r\n      console.log(this.state);\r\n  })\r\n  .catch(console.error);\r\n}\r\n  fetchRecipe(){\r\n    return axios\r\n    //assemble API with Key and set nutrition parameters\r\n   // .get(`${API_URL}?apiKey=${API_KEY}&includeNutrition=true`, {\r\n      .get(`${API_URL}?apiKey=${API_KEY}&maxFat=25&maxSugar=30&minProtein=25&maxCalories=600&number=3`, {\r\n      crossdomain: true\r\n    })\r\n  }\r\n\r\n  getHTMLElementFromImage(image){\r\n    //return `<img src=${API_IMAGE_URL}${recipeID}-312x231@2x.jpg class=\"weather-icon\"/>`\r\n  }\r\n  \r\n  handleSelect(activeRecipe, e) {\r\n    this.setState({activeRecipe});\r\n  };\r\n\r\n  render(){\r\n    return (\r\n      <div>\r\n      <Carousel activeIndex={this.state.activeRecipe} onSelect={this.handleSelect}>\r\n      {this.state.recipes.map((recipe, index) => {\r\n        const options = {\r\n          // title: {\r\n          //   text: \"Basic Column Chart in React\"\r\n          // },\r\n          data: [{\t\t\t\t\r\n            type: \"pie\",\r\n            startAngle: 240,\r\n            yValueFormatString: \"##0.0\\\"g\\\"\",\r\n            indexLabel: \"{label} {y}\",\r\n            dataPoints: [\r\n              {y: recipe.protein, label: \"Protéines\"},\r\n              {y: recipe.fat, label: \"Gras\"},\r\n              {y: recipe.sugar, label: \"Sucre\"},\r\n            ]\r\n           }]\r\n          }\r\n        return (\r\n        <Carousel.Item key={recipe.title}>\r\n          <div className=\"d-flex flex-row container\">\r\n            <div className=\"recipe-img\">\r\n              <img\r\n                  src={recipe.image}\r\n                  alt={recipe.title}\r\n                />\r\n            </div>\r\n            \r\n            <div className=\"recipe-chart\">\r\n              <CanvasJSChart options = {options}></CanvasJSChart>\r\n            </div>\r\n          </div>\r\n         \r\n          <Carousel.Caption>\r\n            <h3>{recipe.title}</h3>\r\n          </Carousel.Caption>\r\n        </Carousel.Item>\r\n      )}\r\n      )}\r\n      </Carousel>\r\n    </div> \r\n    )\r\n  }\r\n}\r\n\r\nexport default Recipe;\r\n"]},"metadata":{},"sourceType":"module"}