{"ast":null,"code":"var _jsxFileName = \"/Users/jakobzettel/Documents/GitHub/PROJECT_WEB_OCRES/frontend/src/widgets/recette.js\";\nimport './recette.css';\nimport React from 'react';\nimport Carousel from 'react-bootstrap/Carousel';\nimport axios from \"axios\";\nimport CanvasJSReact from '../canvasjs.react'; //var CanvasJSReact = require('./canvasjs.react');\n\nvar CanvasJS = CanvasJSReact.CanvasJS;\nvar CanvasJSChart = CanvasJSReact.CanvasJSChart;\nconst API_KEY = \"afcaada881f54b3e87dac57c23cff390\";\nconst API_URL = \"https://api.spoonacular.com/recipes/complexSearch\"; //const API_URL = \"https://api.spoonacular.com/recipes/716429/information\";\n// const API_IMAGE_URL = \"https://spoonacular.com/recipeImages/\";\n\nexport class Recipe extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeRecipe: 0,\n      recipes: [{\n        title: 'TestRezept',\n        image: 'http://www.galerie-imagine.fr/images/image-de-repas_3.jpg',\n        calories: 800,\n        protein: 60,\n        fat: 300,\n        sugar: 80\n      }, {\n        title: 'TestRezept2',\n        image: 'http://www.galerie-imagine.fr/images/image-de-repas_9.jpg',\n        calories: 700,\n        protein: 80,\n        fat: 360,\n        sugar: 180\n      }]\n    };\n    this.fetchRecipe = this.fetchRecipe.bind(this);\n    this.handleSelect = this.handleSelect.bind(this);\n  }\n\n  writeRecipesToState(result) {\n    const newRecipe = {\n      title: result.title,\n      image: result.image,\n      calories: result.nutrition.nutrients[0].amount,\n      protein: result.nutrition.nutrients[1].amount,\n      fat: result.nutrition.nutrients[2].amount,\n      sugar: result.nutrition.nutrients[3].amount\n    };\n    this.setState({\n      recipes: [...this.state.recipes, newRecipe]\n    });\n  }\n\n  componentDidMount() {\n    this.fetchRecipe().then(response => {\n      // Récupère la donnée d'une API\n      const data = response.data;\n      console.log(data);\n\n      for (const result in data.results) {\n        this.writeRecipesToState(result);\n      }\n\n      console.log(this.state);\n    }).catch(console.error);\n  }\n\n  fetchRecipe() {\n    return axios //assemble API with Key and set nutrition parameters\n    // .get(`${API_URL}?apiKey=${API_KEY}&includeNutrition=true`, {\n    .get(`${API_URL}?apiKey=${API_KEY}&maxFat=25&maxSugar=30&minProtein=25&maxCalories=600&number=3`, {\n      crossdomain: true\n    });\n  }\n\n  getHTMLElementFromImage(image) {//return `<img src=${API_IMAGE_URL}${recipeID}-312x231@2x.jpg class=\"weather-icon\"/>`\n  }\n\n  handleSelect(activeRecipe, e) {\n    this.setState({\n      activeRecipe\n    });\n  }\n\n  render() {\n    const recipe = this.state.recipes[this.state.activeRecipe];\n    const options = {\n      title: {\n        text: \"Basic Column Chart in React\"\n      },\n      data: [{\n        type: \"pie\",\n        startAngle: 240,\n        yValueFormatString: \"##0.0\\\"g\\\"\",\n        indexLabel: \"{label} {y}\",\n        dataPoints: [{\n          y: recipe.protein,\n          label: \"Protéines\"\n        }, {\n          y: recipe.fat,\n          label: \"Gras\"\n        }, {\n          y: recipe.sugar,\n          label: \"Sucre\"\n        }]\n      }]\n    };\n    console.log(options);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 7\n      }\n    }, this.state.recipes.length > 0 && /*#__PURE__*/React.createElement(CanvasJSChart, {\n      options: options,\n      onRef: ref => this.chart = ref,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 10\n      }\n    }), /*#__PURE__*/React.createElement(Carousel, {\n      activeIndex: this.state.activeRecipe,\n      onSelect: this.handleSelect,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 7\n      }\n    }, this.state.recipes.map((recipe, index) => /*#__PURE__*/React.createElement(Carousel.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"d-block w-100\",\n      src: recipe.image,\n      alt: recipe.title,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Carousel.Caption, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }\n    }, recipe.title))))));\n  }\n\n}","map":{"version":3,"sources":["/Users/jakobzettel/Documents/GitHub/PROJECT_WEB_OCRES/frontend/src/widgets/recette.js"],"names":["React","Carousel","axios","CanvasJSReact","CanvasJS","CanvasJSChart","API_KEY","API_URL","Recipe","Component","constructor","props","state","activeRecipe","recipes","title","image","calories","protein","fat","sugar","fetchRecipe","bind","handleSelect","writeRecipesToState","result","newRecipe","nutrition","nutrients","amount","setState","componentDidMount","then","response","data","console","log","results","catch","error","get","crossdomain","getHTMLElementFromImage","e","render","recipe","options","text","type","startAngle","yValueFormatString","indexLabel","dataPoints","y","label","length","ref","chart","map","index"],"mappings":"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","sourcesContent":["import './recette.css';\nimport React from 'react';\nimport Carousel from 'react-bootstrap/Carousel';\nimport axios from \"axios\";\nimport CanvasJSReact from '../canvasjs.react';\n//var CanvasJSReact = require('./canvasjs.react');\nvar CanvasJS = CanvasJSReact.CanvasJS;\nvar CanvasJSChart = CanvasJSReact.CanvasJSChart;\n\n\nconst API_KEY = \"afcaada881f54b3e87dac57c23cff390\";\nconst API_URL = \"https://api.spoonacular.com/recipes/complexSearch\";\n//const API_URL = \"https://api.spoonacular.com/recipes/716429/information\";\n// const API_IMAGE_URL = \"https://spoonacular.com/recipeImages/\";\n\n\nexport class Recipe extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeRecipe: 0,\n      recipes: [{\n        title: 'TestRezept',\n        image: 'http://www.galerie-imagine.fr/images/image-de-repas_3.jpg',\n        calories: 800,\n        protein: 60,\n        fat: 300,\n        sugar: 80,\n      },{\n        title: 'TestRezept2',\n        image: 'http://www.galerie-imagine.fr/images/image-de-repas_9.jpg',\n        calories: 700,\n        protein: 80,\n        fat: 360,\n        sugar: 180,\n      }]\n     }\n    this.fetchRecipe = this.fetchRecipe.bind(this);\n    this.handleSelect = this.handleSelect.bind(this);\n  }\n\n  writeRecipesToState(result){\n    const newRecipe = {\n      title: result.title,\n      image: result.image,\n      calories: result.nutrition.nutrients[0].amount,\n      protein: result.nutrition.nutrients[1].amount,\n      fat: result.nutrition.nutrients[2].amount,\n      sugar: result.nutrition.nutrients[3].amount,\n    }\n    this.setState({\n      recipes: [\n        ...this.state.recipes,\n        newRecipe\n      ]\n    })\n  }\n\n  componentDidMount(){\n    this.fetchRecipe()\n    .then((response) => {\n      // Récupère la donnée d'une API\n      const data = response.data;\n      console.log(data);\n\n      for(const result in data.results) {\n        this.writeRecipesToState(result);\n      }\n      console.log(this.state);\n  })\n  .catch(console.error);\n}\n  fetchRecipe(){\n    return axios\n    //assemble API with Key and set nutrition parameters\n   // .get(`${API_URL}?apiKey=${API_KEY}&includeNutrition=true`, {\n      .get(`${API_URL}?apiKey=${API_KEY}&maxFat=25&maxSugar=30&minProtein=25&maxCalories=600&number=3`, {\n      crossdomain: true\n    })\n  }\n\n  getHTMLElementFromImage(image){\n    //return `<img src=${API_IMAGE_URL}${recipeID}-312x231@2x.jpg class=\"weather-icon\"/>`\n  }\n  \n  handleSelect(activeRecipe, e) {\n    this.setState({activeRecipe});\n  };\n\n  render(){\n    const recipe = this.state.recipes[this.state.activeRecipe];\n    const options = {\n      title: {\n        text: \"Basic Column Chart in React\"\n      },\n      data: [{\t\t\t\t\n        type: \"pie\",\n        startAngle: 240,\n        yValueFormatString: \"##0.0\\\"g\\\"\",\n        indexLabel: \"{label} {y}\",\n        dataPoints: [\n          {y: recipe.protein, label: \"Protéines\"},\n          {y: recipe.fat, label: \"Gras\"},\n          {y: recipe.sugar, label: \"Sucre\"},\n        ]\n       }]\n  }\n  console.log(options)\n    return(\n      <div>\n        {this.state.recipes.length > 0 &&\n         <CanvasJSChart options = {options} onRef = {ref => this.chart = ref}></CanvasJSChart>\n        }\n      <Carousel activeIndex={this.state.activeRecipe} onSelect={this.handleSelect}>\n      {this.state.recipes.map((recipe, index) => (\n        <Carousel.Item>\n          <img\n            className=\"d-block w-100\"\n            src={recipe.image}\n            alt={recipe.title}\n          />\n          <Carousel.Caption>\n            <h3>{recipe.title}</h3>\n          </Carousel.Caption>\n        </Carousel.Item>\n      ))}\n      </Carousel>\n      {/* <div id=\"carouselExampleIndicators\" className=\"carousel slide\" data-ride=\"carousel\">\n      <ol className=\"carousel-indicators\">\n      {this.state.recipes.map((recipe, index) => (\n          <li\n            data-target=\"#carouselExampleIndicators\"\n            data-slide-to={index}\n            className={`${index === this.state.activeRecipe ? 'active' : ''}`}\n            key={recipe.title}>\n          </li>\n        ))}\n      </ol>\n      <div className=\"carousel-inner\">\n        {this.state.recipes.map((recipe, index) => (\n          <div className={`carousel-item ${index === this.state.activeRecipe ? 'active' : ''}`} key={recipe.title}>\n            <span className=\"titel\">{recipe.title}</span>\n            <span className=\"conditions\"><img src={`${recipe.image}`} alt={recipe.title}></img></span>\n          </div>\n        ))}\n      </div>\n      <a className=\"carousel-control-prev\" href=\"#carouselExampleIndicators\" role=\"button\" data-slide=\"prev\">\n        <span className=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span>\n        <span className=\"sr-only\">Previous</span>\n      </a>\n      <a className=\"carousel-control-next\" href=\"#carouselExampleIndicators\" role=\"button\" data-slide=\"next\">\n        <span className=\"carousel-control-next-icon\" aria-hidden=\"true\"></span>\n        <span className=\"sr-only\">Next</span>\n      </a>\n    </div> */}\n    </div> \n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}